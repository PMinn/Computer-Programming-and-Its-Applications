(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(6371)}])},6371:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return C}});var n=s(5893),l=s(7898),a=s(4862),c=s(136),i=s(9314),o=s(3144),r=s(3291),h=s(5632),d=s(3906),u=s(6789),m=s(1652),x=s(2845),f=s(9527),j=s(8389),p=s(4637),w=s(7294);let g=e=>(0,n.jsxs)("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...e,children:[(0,n.jsx)("path",{d:"M11.5 21C16.7467 21 21 16.7467 21 11.5C21 6.25329 16.7467 2 11.5 2C6.25329 2 2 6.25329 2 11.5C2 16.7467 6.25329 21 11.5 21Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),(0,n.jsx)("path",{d:"M22 22L20 20",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"})]}),v=e=>(0,n.jsx)("svg",{"aria-hidden":"true",fill:"none",focusable:"false",role:"presentation",viewBox:"0 0 256 256",width:"1.2em",height:"1.2em",...e,children:(0,n.jsx)("path",{fill:"currentColor",d:"M200,24H72A16,16,0,0,0,56,40V64H40A16,16,0,0,0,24,80v96a16,16,0,0,0,16,16H56v24a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V40A16,16,0,0,0,200,24ZM72,160a8,8,0,0,1-6.15-13.12L81.59,128,65.85,109.12a8,8,0,0,1,12.3-10.24L92,115.5l13.85-16.62a8,8,0,1,1,12.3,10.24L102.41,128l15.74,18.88a8,8,0,0,1-12.3,10.24L92,140.5,78.15,157.12A8,8,0,0,1,72,160Zm56,56H72V192h56Zm0-152H72V40h56Zm72,152H144V192a16,16,0,0,0,16-16v-8h40Zm0-64H160V104h40Zm0-64H160V80a16,16,0,0,0-16-16V40h56Z"})});function C(){let[e,t]=(0,w.useState)([]),[s,C]=(0,w.useState)(null),[N,b]=(0,w.useState)(null),[k,y]=(0,w.useState)(""),[_,L]=(0,w.useState)(new Set([])),[S,H]=(0,w.useState)(!1),V=!!k;(0,w.useEffect)(()=>{fetch("".concat("","/static/universityList.json")).then(e=>e.json()).then(t)},[]);let Z=(0,w.useCallback)(e=>{e?y(e):y("")},[]),A=(0,w.useMemo)(()=>{let t=[...e];return V&&(t=t.filter(e=>e.school.text.includes(k))),t},[e,k]),E=(0,w.useCallback)(()=>y(""),[]);return(0,n.jsxs)("main",{className:"flex h-screen",children:[(0,n.jsxs)(l.w,{className:"w-[25%] min-w-[450px] h-screen",radius:"none",children:[(0,n.jsx)(a.u,{children:(0,n.jsx)(c.Y,{isClearable:!0,className:"w-full",placeholder:"搜尋校名",startContent:(0,n.jsx)(g,{}),value:k,onClear:()=>E(),onValueChange:Z})}),(0,n.jsx)(i.G,{className:"h-[80%] p-0",children:(0,n.jsxs)(o.b,{removeWrapper:!0,hideHeader:!0,selectionMode:"multiple",classNames:{base:"max-h-[100%] overflow-scroll",table:"min-h-[100%]"},selectedKeys:_,onSelectionChange:L,children:[(0,n.jsxs)(r.J,{children:[(0,n.jsx)(h.j,{children:"學校"}),(0,n.jsx)(h.j,{children:"縣市"})]}),(0,n.jsx)(d.y,{emptyContent:"No data found",items:A,children:e=>(0,n.jsxs)(u.g,{children:[(0,n.jsx)(m.X,{children:e.school.text}),(0,n.jsx)(m.X,{children:e.city.text})]},e.school.value)})]})}),(0,n.jsx)(x.i,{children:(0,n.jsx)(f.A,{isLoading:S,color:"primary",className:"w-full",onClick:function(){H(!0),fetch("".concat("","/api/analysis"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify([..._].map(t=>e.find(e=>e.school.value==t)))}).then(e=>e.json()).then(e=>{console.log(e);let t=new Date().getTime();C(["".concat("","/static/count.jpg?t=").concat(t),"".concat("","/static/cause.jpg?t=").concat(t),"".concat("","/static/age.jpg?t=").concat(t)]),b(["肇因","年齡"].map(e=>({name:e,url:"".concat("","/static/").concat(e,".xlsx?t=").concat(t)})))}).finally(()=>H(!1))},children:"分析"})})]}),(0,n.jsx)("div",{className:"grow overflow-y-scroll h-screen relative",children:(0,n.jsxs)("div",{className:"w-full py-5 h-full flex flex-col items-center",children:[N&&(0,n.jsxs)("div",{className:"w-[90%] p-5 flex items-center bg-white rounded-large mb-5",children:[(0,n.jsx)("div",{className:"mx-2",children:"下載原始資料"}),N.map(e=>(0,n.jsx)(f.A,{className:"mx-2 bg-gradient-to-tr from-[#185C37] to-[#33C481] text-white shadow-lg",variant:"solid",startContent:(0,n.jsx)(v,{}),href:e.url,target:"_blank",as:j.O,radius:"full",children:e.name}))]}),s&&s.map(e=>(0,n.jsx)("div",{className:"w-[90%] h-[50vh] flex justify-center items-center bg-white rounded-large mb-5",children:(0,n.jsx)(p.J,{className:"w-full  h-full object-contain",src:e,disableSkeleton:!0})}))]})})]})}}},function(e){e.O(0,[43,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);