(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(8668)}])},8668:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var s=n(5893),l=n(7898),c=n(4862),a=n(136),o=n(9314),i=n(3144),r=n(3291),h=n(5632),u=n(3906),d=n(6789),f=n(1652),j=n(2845),x=n(9527),m=n(4637),p=n(7294);let w=e=>(0,s.jsxs)("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...e,children:[(0,s.jsx)("path",{d:"M11.5 21C16.7467 21 21 16.7467 21 11.5C21 6.25329 16.7467 2 11.5 2C6.25329 2 2 6.25329 2 11.5C2 16.7467 6.25329 21 11.5 21Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),(0,s.jsx)("path",{d:"M22 22L20 20",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"})]});function C(){let[e,t]=(0,p.useState)([]),[n,C]=(0,p.useState)([]),[N,g]=(0,p.useState)(""),[k,v]=(0,p.useState)(new Set([])),[b,y]=(0,p.useState)(!1),_=!!N;(0,p.useEffect)(()=>{fetch("".concat("","/static/universityList.json")).then(e=>e.json()).then(t)},[]);let S=(0,p.useCallback)(e=>{e?g(e):g("")},[]),L=(0,p.useMemo)(()=>{let t=[...e];return _&&(t=t.filter(e=>e.school.text.includes(N))),t},[e,N]),E=(0,p.useCallback)(()=>g(""),[]);return(0,s.jsxs)("main",{className:"flex h-screen",children:[(0,s.jsxs)(l.w,{className:"w-[25%] min-w-[450px] h-screen",radius:"none",children:[(0,s.jsx)(c.u,{children:(0,s.jsx)(a.Y,{isClearable:!0,className:"w-full",placeholder:"搜尋校名",startContent:(0,s.jsx)(w,{}),value:N,onClear:()=>E(),onValueChange:S})}),(0,s.jsx)(o.G,{className:"h-[80%] p-0",children:(0,s.jsxs)(i.b,{removeWrapper:!0,hideHeader:!0,selectionMode:"multiple",classNames:{base:"max-h-[100%] overflow-scroll",table:"min-h-[100%]"},selectedKeys:k,onSelectionChange:v,children:[(0,s.jsxs)(r.J,{children:[(0,s.jsx)(h.j,{children:"學校"}),(0,s.jsx)(h.j,{children:"縣市"})]}),(0,s.jsx)(u.y,{emptyContent:"No data found",items:L,children:e=>(0,s.jsxs)(d.g,{children:[(0,s.jsx)(f.X,{children:e.school.text}),(0,s.jsx)(f.X,{children:e.city.text})]},e.school.value)})]})}),(0,s.jsx)(j.i,{children:(0,s.jsx)(x.A,{isLoading:b,color:"primary",className:"w-full",onClick:function(){y(!0),fetch("".concat("","/api/analysis"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify([...k].map(t=>e.find(e=>e.school.value==t)))}).then(e=>e.json()).then(e=>{console.log(e);let t=new Date().getTime();C(["".concat("","/static/count.jpg?t=").concat(t),"".concat("","/static/cause.jpg?t=").concat(t),"".concat("","/static/age.jpg?t=").concat(t)])}).finally(()=>y(!1))},children:"分析"})})]}),(0,s.jsx)("div",{className:"grow overflow-y-scroll h-screen relative",children:(0,s.jsx)("div",{className:"w-full py-5 h-full flex flex-col items-center",children:n.map(e=>(0,s.jsx)("div",{className:"w-[90%] h-[50vh] flex justify-center items-center bg-white rounded-large mb-5",children:(0,s.jsx)(m.J,{className:"w-full  h-full object-contain",src:e,disableSkeleton:!0})}))})})]})}}},function(e){e.O(0,[215,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);